(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{18:function(t,e,a){},19:function(t,e,a){},22:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),i=a(11),r=a.n(i),c=(a(18),a(19),a(2)),o=a(3),l=a(5),d=a(4),u=a(0),h=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("div",{className:"block-title",children:Object(u.jsx)("h2",{className:"title-text",children:"AB Test Real"})}),Object(u.jsxs)("div",{className:"block-input",children:[Object(u.jsx)("svg",{className:"search",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8929 11.6086L17.7348 16.4505C17.905 16.6208 18.0005 16.8518 18.0004 17.0925C18.0004 17.3333 17.9046 17.5641 17.7343 17.7343C17.564 17.9045 17.3331 18.0001 17.0923 18C16.8516 17.9999 16.6207 17.9042 16.4505 17.7339L11.6086 12.892C10.1612 14.0131 8.34104 14.5406 6.51844 14.3674C4.69585 14.1941 3.00771 13.333 1.79746 11.9593C0.587216 10.5855 -0.0542374 8.80231 0.00359662 6.97241C0.0614306 5.14251 0.814208 3.40337 2.10879 2.10879C3.40337 0.814208 5.14251 0.0614306 6.97241 0.00359662C8.80231 -0.0542374 10.5855 0.587216 11.9593 1.79746C13.333 3.00771 14.1941 4.69585 14.3674 6.51844C14.5406 8.34104 14.0131 10.1612 12.892 11.6086H12.8929ZM7.20051 12.5995C8.63265 12.5995 10.0061 12.0306 11.0188 11.0179C12.0315 10.0052 12.6004 8.63175 12.6004 7.19961C12.6004 5.76748 12.0315 4.39399 11.0188 3.38132C10.0061 2.36865 8.63265 1.79973 7.20051 1.79973C5.76838 1.79973 4.3949 2.36865 3.38222 3.38132C2.36955 4.39399 1.80063 5.76748 1.80063 7.19961C1.80063 8.63175 2.36955 10.0052 3.38222 11.0179C4.3949 12.0306 5.76838 12.5995 7.20051 12.5995Z",fill:"#BBBBBB"})}),Object(u.jsx)("input",{className:"input-search",type:"text"})]}),Object(u.jsx)("div",{className:"block-photo",children:Object(u.jsx)("div",{className:"photo"})}),Object(u.jsx)("div",{className:"block-exit",children:Object(u.jsx)("svg",{className:"exit",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(u.jsx)("path",{d:"M7.79 13.29C8.18 13.68 8.81 13.68 9.2 13.29L12.79 9.7C12.8827 9.60749 12.9563 9.4976 13.0064 9.37662C13.0566 9.25565 13.0824 9.12597 13.0824 8.995C13.0824 8.86403 13.0566 8.73435 13.0064 8.61338C12.9563 8.4924 12.8827 8.38251 12.79 8.29L9.2 4.7C9.01302 4.51302 8.75943 4.40798 8.495 4.40798C8.23057 4.40798 7.97698 4.51302 7.79 4.7C7.60302 4.88698 7.49798 5.14057 7.49798 5.405C7.49798 5.66943 7.60302 5.92302 7.79 6.11L9.67 8H1C0.45 8 0 8.45 0 9C0 9.55 0.45 10 1 10H9.67L7.79 11.88C7.4 12.27 7.41 12.91 7.79 13.29ZM16 0H2C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2V5C0 5.55 0.45 6 1 6C1.55 6 2 5.55 2 5V3C2 2.45 2.45 2 3 2H15C15.55 2 16 2.45 16 3V15C16 15.55 15.55 16 15 16H3C2.45 16 2 15.55 2 15V13C2 12.45 1.55 12 1 12C0.45 12 0 12.45 0 13V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z",fill:"#5D6D97"})})})]})}}]),a}(s.a.Component),p=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).onShow=function(){document.getElementById("lis").className="show"},t}return Object(o.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsx)("div",{id:"switch",className:"off",children:Object(u.jsx)("button",{className:"slider",children:"Projects"})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"btn-menu",children:"Account"})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"btn-menu",children:"Support"})})]})}}]),a}(s.a.Component),j=a(6),b=a.n(j),v=a(9),m=a(7),x=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(u.jsxs)("table",{className:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"User ID"}),Object(u.jsx)("th",{children:"Registration"}),Object(u.jsx)("th",{children:"Last Activity"}),Object(u.jsx)("th",{children:"Active"})]})}),Object(u.jsx)("tbody",{children:this.props.data.map((function(e){return t.props.isEdit&&t.props.editable===e.userID?Object(u.jsx)(y,{activity:e,onUpdate:t.props.onUpdate,onChangeMode:t.props.onChangeMode},e.userID):Object(u.jsx)(O,{activity:e,onRemove:t.props.onRemove,onChangeMode:t.props.onChangeMode},e.userID)}))})]})}}]),a}(s.a.Component),O=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:this.props.activity.userID}),Object(u.jsx)("td",{children:this.props.activity.dateRegistration}),Object(u.jsx)("td",{children:this.props.activity.dateLastActivity}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{className:"edit-btn",onClick:function(){return t.props.onChangeMode(t.props.activity.userID)},children:"EditMode"})})]})}}]),a}(s.a.Component),y=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).onChangeNewReg=function(t){return n.setState({dateRegistration:t.target.value})},n.onChangeNewLast=function(t){return n.setState({dateLastActivity:t.target.value})},n.state={dateRegistration:n.props.activity.dateRegistration.split(".").reverse().join("-"),dateLastActivity:n.props.activity.dateLastActivity.split(".").reverse().join("-")},n.onChangeNewReg=n.onChangeNewReg.bind(Object(m.a)(n)),n.onChangeNewLast=n.onChangeNewLast.bind(Object(m.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(u.jsxs)("tr",{id:this.props.activity.userID,children:[Object(u.jsx)("td",{children:this.props.activity.userID}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{className:"change-dt",type:"date",value:this.state.dateRegistration,onChange:this.onChangeNewReg})}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{className:"change-dt",type:"date",value:this.state.dateLastActivity,onChange:this.onChangeNewLast})}),Object(u.jsxs)("td",{children:[Object(u.jsx)("button",{className:"save-btn",onClick:function(){return t.props.onUpdate(t.props.activity.userID,t.state.dateRegistration,t.state.dateLastActivity)},children:"Submit"}),Object(u.jsx)("button",{className:"remove-btn",onClick:function(){return t.props.onChangeMode(t.props.activity.userID)},children:"Cancel"})]})]},this.props.activity.userID)}}]),a}(s.a.Component),C=a(8),f=a.n(C),g=a(12),k=a.n(g),N=a(13);a.n(N)()(f.a);var w={chart:{style:{fontFamily:"Ubuntu",color:"#3C5AA8"},borderRadius:5},title:{text:'<p style="color: #3C5AA8; opacity: 0.4">Users Lifetimes Histogram<p>'},xAxis:[{title:{text:"Users ID"},visible:!1,opposite:!0},{title:{text:"Lifetime days intervals"},startOnTick:!0,gridLineWidth:2,endOnTick:!0,minRange:20,minorTicks:!0,tickInterval:.2,tickPixelInterval:150,style:{fontFamily:"Ubuntu",color:"#3C5AA8"}}],yAxis:[{title:{text:""},opposite:!0},{title:{text:"Users number"},style:{fontFamily:"Ubuntu",color:"#3C5AA8"}}],tooltip:{formatter:function(){var t="";return"Histogram"===this.point.series.name?(t='<p style="color: #4A9DFF">Lifetime days interval: '.concat(this.point.x," - ").concat(this.point.x2,"</p>"),t+='<p style="color: #4A9DFF">Users number: '.concat(this.point.y,"</p>")):(t='<p style="color: black">User ID: '.concat(this.key,"</p>"),t+='<p style="color: black">User lifetime:'.concat(this.point.y,"</p>")),t},useHTML:!0},series:[{name:"Histogram",type:"histogram",xAxis:1,yAxis:1,baseSeries:"s1",zIndex:-1},{name:"Days of user lifetime",type:"scatter",data:[0],id:"s1",marker:{radius:3},visible:!1}]},A=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={data:n.props.data},n}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(t){w.series[1].data=t.data,this.setState({data:t.data})}},{key:"render",value:function(){return Object(u.jsx)(k.a,{highcharts:f.a,options:w,oneToOne:!0,allowChartUpdate:!0,updateArgs:[!0,!0,!0]})}}]),a}(s.a.Component),D=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).onChangeMode=function(t){n.state.isEdit&&t!==n.state.editable||n.setState({editable:n.state.isEdit?"":t,isEdit:!n.state.isEdit})},n.onUpdate=function(){var t=Object(v.a)(b.a.mark((function t(e,a,s){var i,r,c,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length<1||s.length<1)){t.next=3;break}return alert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430"),t.abrupt("return");case 3:if(!(new Date(a).getTime()>new Date(s).getTime())){t.next=6;break}return alert("\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0440\u0430\u043d\u044c\u0448\u0435 \u0434\u0430\u0442\u044b \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"),t.abrupt("return");case 6:if(!((new Date).getTime()<new Date(a).getTime||(new Date).getTime()<new Date(s).getTime())){t.next=9;break}return alert("\u0414\u0430\u0442\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439"),t.abrupt("return");case 9:return i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:e,dateRegistration:a,dateLastActivity:s})},t.prev=10,t.next=13,fetch("https://mainapi-react.appspot.com/main/update",i);case 13:if(!(r=t.sent).ok){t.next=23;break}return t.next=17,r.json();case 17:c=t.sent,(o=n.state.activities).forEach((function(t){t.userID===e&&(t.dateRegistration=c.dateRegistration,t.dateLastActivity=c.dateLastActivity,t.daysByActivity=c.daysByActivity)})),n.setState({activities:o}),t.next=25;break;case 23:console.error(r.body),alert("\u041e\u0448\u0438\u0431\u043a\u0430 "+r.status);case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(10),console.error(t.t0),alert(t.t0);case 31:n.onChangeMode(e);case 32:case"end":return t.stop()}}),t,null,[[10,27]])})));return function(e,a,n){return t.apply(this,arguments)}}(),n.onCalculate=Object(v.a)(b.a.mark((function t(){var e,a,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.state.activities.length<1)){t.next=2;break}return t.abrupt("return");case 2:return e={method:"GET",headers:{"Content-Type":"application/json"}},t.prev=3,t.next=6,fetch("https://mainapi-react.appspot.com/main/retention",e);case 6:return a=t.sent,t.next=9,a.json();case 9:s=t.sent,a.ok?(i=[],n.state.activities.forEach((function(t){i.push([t.userID,t.daysByActivity])})),i.sort((function(t,e){return t[1]>e[1]?1:t[1]<e[1]?-1:0})),n.setState({result:"Rolling Retention 7 day: ".concat(s.result," %"),parameters:i})):(console.log(s),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430: ".concat(a.status))),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),alert(t.t0);case 17:document.getElementById("graph").className="graph";case 18:case"end":return t.stop()}}),t,null,[[3,13]])}))),n.state={activities:[],parameters:[],result:"",isEdit:!1,editable:"",loading:!0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=Object(v.a)(b.a.mark((function t(){var e,a,n,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"GET",headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,fetch("https://mainapi-react.appspot.com/main/all",e);case 4:return a=t.sent,t.next=7,a.json();case 7:if(n=t.sent,a.ok)s=[],n.forEach((function(t){s.push([t.userID,t.daysByActivity])})),s.sort((function(t,e){return t[1]>e[1]?1:t[1]<e[1]?-1:0})),this.setState({activities:n,parameters:s});else try{alert(JSON.stringify(n.errors))}catch(i){alert(n)}t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),alert("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c");case 14:this.setState({loading:!1});case 15:case"end":return t.stop()}}),t,this,[[1,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(u.jsx)("div",{className:"field",children:Object(u.jsxs)("div",{className:"in",children:[Object(u.jsx)("h1",{className:"field-title",children:"Activities"}),this.state.loading?Object(u.jsx)("div",{className:"lds-dual-ring"}):this.state.activities.length>0&&Object(u.jsx)(x,{editable:this.state.editable,data:this.state.activities,isEdit:this.state.isEdit,onChangeMode:this.onChangeMode,onRemove:this.onRemoveUser,onUpdate:this.onUpdate}),this.state.activities.length>0&&Object(u.jsxs)("div",{className:"calculate-place",children:[Object(u.jsx)("h3",{className:"retention",children:this.state.result}),Object(u.jsx)("button",{type:"submit",className:"calculate",onClick:this.onCalculate,children:"Calculate"})]}),this.state.parameters.length>0&&Object(u.jsx)("div",{id:"graph",className:"graph-none",children:Object(u.jsx)(A,{data:this.state.parameters})})]})})}}]),a}(s.a.Component);var R=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{}),Object(u.jsx)(p,{}),Object(u.jsx)(D,{})]})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7d3b7266.chunk.js.map