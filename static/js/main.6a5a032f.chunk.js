(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{18:function(t,e,a){},19:function(t,e,a){},20:function(t,e,a){},22:function(t,e,a){},24:function(t,e,a){},25:function(t,e,a){"use strict";a.r(e);var s=a(1),n=a.n(s),i=a(11),c=a.n(i),r=(a(18),a(19),a(2)),o=a(3),l=a(5),d=a(4),h=(a(20),a(0)),u=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)("div",{className:"block-title",children:Object(h.jsx)("h2",{className:"title-text",children:"AB Test Real"})}),Object(h.jsxs)("div",{className:"block-input",children:[Object(h.jsx)("svg",{className:"search",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8929 11.6086L17.7348 16.4505C17.905 16.6208 18.0005 16.8518 18.0004 17.0925C18.0004 17.3333 17.9046 17.5641 17.7343 17.7343C17.564 17.9045 17.3331 18.0001 17.0923 18C16.8516 17.9999 16.6207 17.9042 16.4505 17.7339L11.6086 12.892C10.1612 14.0131 8.34104 14.5406 6.51844 14.3674C4.69585 14.1941 3.00771 13.333 1.79746 11.9593C0.587216 10.5855 -0.0542374 8.80231 0.00359662 6.97241C0.0614306 5.14251 0.814208 3.40337 2.10879 2.10879C3.40337 0.814208 5.14251 0.0614306 6.97241 0.00359662C8.80231 -0.0542374 10.5855 0.587216 11.9593 1.79746C13.333 3.00771 14.1941 4.69585 14.3674 6.51844C14.5406 8.34104 14.0131 10.1612 12.892 11.6086H12.8929ZM7.20051 12.5995C8.63265 12.5995 10.0061 12.0306 11.0188 11.0179C12.0315 10.0052 12.6004 8.63175 12.6004 7.19961C12.6004 5.76748 12.0315 4.39399 11.0188 3.38132C10.0061 2.36865 8.63265 1.79973 7.20051 1.79973C5.76838 1.79973 4.3949 2.36865 3.38222 3.38132C2.36955 4.39399 1.80063 5.76748 1.80063 7.19961C1.80063 8.63175 2.36955 10.0052 3.38222 11.0179C4.3949 12.0306 5.76838 12.5995 7.20051 12.5995Z",fill:"#BBBBBB"})}),Object(h.jsx)("input",{className:"input-search",type:"text"})]}),Object(h.jsx)("div",{className:"block-photo",children:Object(h.jsx)("div",{className:"photo"})}),Object(h.jsx)("div",{className:"block-exit",children:Object(h.jsx)("svg",{className:"exit",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(h.jsx)("path",{d:"M7.79 13.29C8.18 13.68 8.81 13.68 9.2 13.29L12.79 9.7C12.8827 9.60749 12.9563 9.4976 13.0064 9.37662C13.0566 9.25565 13.0824 9.12597 13.0824 8.995C13.0824 8.86403 13.0566 8.73435 13.0064 8.61338C12.9563 8.4924 12.8827 8.38251 12.79 8.29L9.2 4.7C9.01302 4.51302 8.75943 4.40798 8.495 4.40798C8.23057 4.40798 7.97698 4.51302 7.79 4.7C7.60302 4.88698 7.49798 5.14057 7.49798 5.405C7.49798 5.66943 7.60302 5.92302 7.79 6.11L9.67 8H1C0.45 8 0 8.45 0 9C0 9.55 0.45 10 1 10H9.67L7.79 11.88C7.4 12.27 7.41 12.91 7.79 13.29ZM16 0H2C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2V5C0 5.55 0.45 6 1 6C1.55 6 2 5.55 2 5V3C2 2.45 2.45 2 3 2H15C15.55 2 16 2.45 16 3V15C16 15.55 15.55 16 15 16H3C2.45 16 2 15.55 2 15V13C2 12.45 1.55 12 1 12C0.45 12 0 12.45 0 13V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z",fill:"#5D6D97"})})})]})}}]),a}(n.a.Component),p=(a(22),function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).onShow=function(){return s.setState({menu:"hide"===s.state.menu?"show":"hide"}),document.getElementById("arrow").classList.toggle("rotate"),document.getElementById("block-account").className="show"===s.state.menu?"menu-block":"menu-block menu-block-a",!1},s.onAdd=function(){var t=s.state.projects,e=t[t.length-1];t.push(e+1),s.setState({projects:t})},s.state={menu:"hide",projects:[1,2]},s}return Object(o.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"menu",children:[Object(h.jsx)("div",{className:"menu-block menu-block-projects",children:Object(h.jsxs)("a",{className:"menu-link",href:"null",onClick:this.onShow,children:[Object(h.jsx)("img",{id:"arrow",className:"img-arrow",alt:"",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAVCAYAAAAuJkyQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAALVSURBVEhLzZVbTxNBGIbf7vZINepFTQwaIxUiVk4iIQoa0UCMJl7qhWfwgKHEgPF3QDCAQRQVIwE1Gg/RqEAFCwuUQyEWLlBIjN5gohFs6fbkzDJFGqC0BZTnou32nd088803szIfASsIjn2vGBZdIbvDQT798/IiSqNhvyNjUUIjI6NoeG7B6Ldx6Xrr5jU4fjQdG6OjpetIiFjI0t2Dinut8Mk0GP/1HSCPWb1WB142CeOZ/UhOSmQjwyOiHpJk7rbAAxWckz/xuf8ZbB0P4Zj4AZdHibLbTeiz9rPR4RG2UGeXBeVURqaGzGvHkb2b0GMRYLP1IVnPwSNOEFG1JNXbZ2V3hU5YS0ZlKms/wEuWiYcDecfSkZGxm6VTlF2vQJfNDk65ioyZROG5LKQkJ7F0YUIWam8XUFUnSDJKzomCs/P3SeWNKggDpNHlWkmq6EI2EnYYWBqckIRmyqh4EVfyDsJg2M7SuXlQV4835q/w8VFQcCKuXsxBfPw2ls7PgkJmczuq6zuIjBpyMtti8uCFZPw0N79H7ZNe0m8aRKncuJZ/GDExW1g6N0GFWlvNuNXQCR+nkWSMYfYDhe628hoTXGRHatVeUqlDQaXmFTKZWnDncbckQ/ug4PQ+pKbuZGl4DA4OobT6LUSPSqpUMZHS62NYGsicQu8am3D/qXVa5vLJTKSl7WJpZFCpkptEyquERulG0fkcxMXFsvQvs4RevHyFR6+HllTGz8DAR5QSKTfdHAoRRXnZsxo94GBsaxOWTYaSkGCAMTcLcp8DTpcSJWQZaeVmMi30225HkzAKjpwdtIFpzyyljB+6KfJPZYKnUm7ymqlpxNgYeRcypoUUciV0uvXQrVOgMPdAxA0cCnSil07skSrlhQYmYQhOpyhlAT0kim64XE5otVr2z/IyPPwJndYvSEmMRZx+A3iOC34O/QtoZeRyOXh+arH+u1AgwB/NOkDzP1E1BAAAAABJRU5ErkJggg==",width:"25px",height:"13px"}),"Projects"]})}),Object(h.jsxs)("div",{id:"projects",className:this.state.menu,children:[this.state.projects.map((function(t){return Object(h.jsx)("li",{style:t%2===0?{color:"#FB8644"}:{color:"#4A9DFF"},children:Object(h.jsx)("a",{className:"menu-link link-project",href:"!#",children:"Project "+t})},t)})),Object(h.jsx)("div",{className:"block-add",children:Object(h.jsxs)("a",{className:"link-add",href:"!#",onClick:this.onAdd,children:[Object(h.jsx)("img",{className:"img-plus",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAIAAAC1JZyVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABeSURBVEhL7ZXBDcAgDANZtCPw6AQdowuwZxqJGyBGKh98MrL8iO5Jiy2saO5nZBg1VjRXfzOMGtZYQytYQytYQytYky8/j3n5XzZqVOYlo4Y11tAK1tAK1tAKh2siPhqxsfWvgiG3AAAAAElFTkSuQmCC",alt:"",width:"20px",height:"20px"}),"Add new"]})})]}),Object(h.jsx)("div",{id:"block-account",className:"menu-block",children:Object(h.jsx)("a",{className:"menu-link",href:"!#",children:"Account"})}),Object(h.jsx)("div",{className:"menu-block",children:Object(h.jsx)("a",{className:"menu-link",href:"!#",children:"Support"})})]})}}]),a}(n.a.Component)),j=a(6),b=a.n(j),m=a(9),A=a(7),v=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(h.jsxs)("table",{className:"table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"User ID"}),Object(h.jsx)("th",{children:"Registration"}),Object(h.jsx)("th",{children:"Last Activity"}),Object(h.jsx)("th",{children:"Active"})]})}),Object(h.jsx)("tbody",{children:this.props.data.map((function(e){return t.props.isEdit&&t.props.editable===e.userID?Object(h.jsx)(O,{activity:e,onUpdate:t.props.onUpdate,onChangeMode:t.props.onChangeMode},e.userID):Object(h.jsx)(x,{activity:e,onRemove:t.props.onRemove,onChangeMode:t.props.onChangeMode},e.userID)}))})]})}}]),a}(n.a.Component),x=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:this.props.activity.userID}),Object(h.jsx)("td",{children:this.props.activity.dateRegistration}),Object(h.jsx)("td",{children:this.props.activity.dateLastActivity}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{className:"edit-btn",onClick:function(){return t.props.onChangeMode(t.props.activity.userID)},children:"EditMode"})})]})}}]),a}(n.a.Component),O=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).onChangeNewReg=function(t){return s.setState({dateRegistration:t.target.value})},s.onChangeNewLast=function(t){return s.setState({dateLastActivity:t.target.value})},s.state={dateRegistration:s.props.activity.dateRegistration.split(".").reverse().join("-"),dateLastActivity:s.props.activity.dateLastActivity.split(".").reverse().join("-")},s.onChangeNewReg=s.onChangeNewReg.bind(Object(A.a)(s)),s.onChangeNewLast=s.onChangeNewLast.bind(Object(A.a)(s)),s}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(h.jsxs)("tr",{id:this.props.activity.userID,children:[Object(h.jsx)("td",{children:this.props.activity.userID}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{className:"change-dt",type:"date",value:this.state.dateRegistration,onChange:this.onChangeNewReg})}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{className:"change-dt",type:"date",value:this.state.dateLastActivity,onChange:this.onChangeNewLast})}),Object(h.jsxs)("td",{children:[Object(h.jsx)("button",{className:"save-btn",onClick:function(){return t.props.onUpdate(t.props.activity.userID,t.state.dateRegistration,t.state.dateLastActivity)},children:"Submit"}),Object(h.jsx)("button",{className:"remove-btn",onClick:function(){return t.props.onChangeMode(t.props.activity.userID)},children:"Cancel"})]})]},this.props.activity.userID)}}]),a}(n.a.Component),g=a(8),y=a.n(g),C=a(12),f=a.n(C),k=a(13);a.n(k)()(y.a);var N={chart:{style:{fontFamily:"Ubuntu",color:"#3C5AA8"},borderRadius:5},title:{text:'<p style="color: #3C5AA8; opacity: 0.4">Users Lifetimes Histogram<p>'},xAxis:[{title:{text:"Users ID"},visible:!1,opposite:!0},{title:{text:"Lifetime days intervals"},startOnTick:!0,gridLineWidth:2,endOnTick:!0,minRange:20,minorTicks:!0,tickInterval:.2,tickPixelInterval:150,style:{fontFamily:"Ubuntu",color:"#3C5AA8"}}],yAxis:[{title:{text:""},opposite:!0},{title:{text:"Users number"},style:{fontFamily:"Ubuntu",color:"#3C5AA8"}}],tooltip:{formatter:function(){var t="";return"Histogram"===this.point.series.name?(t='<p style="color: #4A9DFF">Lifetime days interval: '.concat(this.point.x," - ").concat(this.point.x2,"</p>"),t+='<p style="color: #4A9DFF">Users number: '.concat(this.point.y,"</p>")):(t='<p style="color: black">User ID: '.concat(this.key,"</p>"),t+='<p style="color: black">User lifetime:'.concat(this.point.y,"</p>")),t},useHTML:!0},series:[{name:"Histogram",type:"histogram",xAxis:1,yAxis:1,baseSeries:"s1",zIndex:-1},{name:"Days of user lifetime",type:"scatter",data:[0],id:"s1",marker:{radius:3},visible:!1}]},w=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).state={data:s.props.data},s}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(t){N.series[1].data=t.data,this.setState({data:t.data})}},{key:"render",value:function(){return Object(h.jsx)(f.a,{highcharts:y.a,options:N,oneToOne:!0,allowChartUpdate:!0,updateArgs:[!0,!0,!0]})}}]),a}(n.a.Component),R=(a(24),function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).onChangeMode=function(t){s.state.isEdit&&t!==s.state.editable||s.setState({editable:s.state.isEdit?"":t,isEdit:!s.state.isEdit})},s.onUpdate=function(){var t=Object(m.a)(b.a.mark((function t(e,a,n){var i,c,r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.length<1||n.length<1)){t.next=3;break}return alert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0434\u0430\u0442\u0430"),t.abrupt("return");case 3:if(!(new Date(a).getTime()>new Date(n).getTime())){t.next=6;break}return alert("\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0440\u0430\u043d\u044c\u0448\u0435 \u0434\u0430\u0442\u044b \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"),t.abrupt("return");case 6:if(!((new Date).getTime()<new Date(a).getTime||(new Date).getTime()<new Date(n).getTime())){t.next=9;break}return alert("\u0414\u0430\u0442\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439"),t.abrupt("return");case 9:return i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:e,dateRegistration:a,dateLastActivity:n})},t.prev=10,t.next=13,fetch("https://mainapi-react.appspot.com/main/update",i);case 13:if(!(c=t.sent).ok){t.next=23;break}return t.next=17,c.json();case 17:r=t.sent,(o=s.state.activities).forEach((function(t){t.userID===e&&(t.dateRegistration=r.dateRegistration,t.dateLastActivity=r.dateLastActivity,t.daysByActivity=r.daysByActivity)})),s.setState({activities:o}),t.next=25;break;case 23:console.error(c.body),alert("\u041e\u0448\u0438\u0431\u043a\u0430 "+c.status);case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(10),console.error(t.t0),alert(t.t0);case 31:s.onChangeMode(e);case 32:case"end":return t.stop()}}),t,null,[[10,27]])})));return function(e,a,s){return t.apply(this,arguments)}}(),s.onCalculate=Object(m.a)(b.a.mark((function t(){var e,a,n,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s.state.activities.length<1)){t.next=2;break}return t.abrupt("return");case 2:return e={method:"GET",headers:{"Content-Type":"application/json"}},t.prev=3,t.next=6,fetch("https://mainapi-react.appspot.com/main/retention",e);case 6:return a=t.sent,t.next=9,a.json();case 9:n=t.sent,a.ok?(i=[],s.state.activities.forEach((function(t){i.push([t.userID,t.daysByActivity])})),i.sort((function(t,e){return t[1]>e[1]?1:t[1]<e[1]?-1:0})),s.setState({result:"Rolling Retention 7 day: ".concat(n.result," %"),parameters:i})):(console.log(n),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430: ".concat(a.status))),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0),alert(t.t0);case 17:document.getElementById("graph").className="graph";case 18:case"end":return t.stop()}}),t,null,[[3,13]])}))),s.state={activities:[],parameters:[],result:"",isEdit:!1,editable:"",loading:!0},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var t=Object(m.a)(b.a.mark((function t(){var e,a,s,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"GET",headers:{"Content-Type":"application/json"}},t.prev=1,t.next=4,fetch("https://mainapi-react.appspot.com/main/all",e);case 4:return a=t.sent,t.next=7,a.json();case 7:if(s=t.sent,a.ok)n=[],s.forEach((function(t){n.push([t.userID,t.daysByActivity])})),n.sort((function(t,e){return t[1]>e[1]?1:t[1]<e[1]?-1:0})),this.setState({activities:s,parameters:n});else try{alert(JSON.stringify(s.errors))}catch(i){alert(s)}t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),alert("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c");case 14:this.setState({loading:!1});case 15:case"end":return t.stop()}}),t,this,[[1,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(h.jsx)("div",{className:"field",children:Object(h.jsxs)("div",{className:"in",children:[Object(h.jsx)("h1",{className:"field-title",children:"Activities"}),this.state.loading?Object(h.jsx)("div",{className:"lds-dual-ring"}):this.state.activities.length>0&&Object(h.jsx)(v,{editable:this.state.editable,data:this.state.activities,isEdit:this.state.isEdit,onChangeMode:this.onChangeMode,onRemove:this.onRemoveUser,onUpdate:this.onUpdate}),this.state.activities.length>0&&Object(h.jsxs)("div",{className:"calculate-place",children:[Object(h.jsx)("h3",{className:"retention",children:this.state.result}),Object(h.jsx)("button",{type:"submit",className:"calculate",onClick:this.onCalculate,children:"Calculate"})]}),this.state.parameters.length>0&&Object(h.jsx)("div",{id:"graph",className:"graph-none",children:Object(h.jsx)(w,{data:this.state.parameters})})]})})}}]),a}(n.a.Component));var D=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(u,{}),Object(h.jsx)(p,{}),Object(h.jsx)(R,{})]})};c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(D,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.6a5a032f.chunk.js.map